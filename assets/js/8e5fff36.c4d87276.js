"use strict";(self.webpackChunknextjs_cn_doc=self.webpackChunknextjs_cn_doc||[]).push([[9784],{3162:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var i=t(5893),r=t(1151);const a={title:"\u56fd\u9645\u5316",description:"https://nextjs.org/docs/app/building-your-application/routing/internationalization"},o=void 0,s={id:"building-your-application/routing/internationalization",title:"\u56fd\u9645\u5316",description:"https://nextjs.org/docs/app/building-your-application/routing/internationalization",source:"@site/docs/02-building-your-application/01-routing/13-internationalization.md",sourceDirName:"02-building-your-application/01-routing",slug:"/building-your-application/routing/internationalization",permalink:"/nextjs-doc-cn-web/docs/building-your-application/routing/internationalization",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/02-building-your-application/01-routing/13-internationalization.md",tags:[],version:"current",sidebarPosition:13,frontMatter:{title:"\u56fd\u9645\u5316",description:"https://nextjs.org/docs/app/building-your-application/routing/internationalization"},sidebar:"appRouter",previous:{title:"\u9879\u76ee\u7ed3\u6784\u548c\u6587\u4ef6\u4f4d\u7f6e",permalink:"/nextjs-doc-cn-web/docs/building-your-application/routing/project-organization"},next:{title:"\u6570\u636e\u8bf7\u6c42",permalink:"/nextjs-doc-cn-web/docs/category/\u6570\u636e\u8bf7\u6c42"}},l={},c=[{value:"Terminology (\u672f\u8bed)",id:"terminology-\u672f\u8bed",level:2},{value:"Routing Overview (\u8def\u7531\u7b80\u4ecb)",id:"routing-overview-\u8def\u7531\u7b80\u4ecb",level:2},{value:"Localization (\u672c\u5730\u5316)",id:"localization-\u672c\u5730\u5316",level:2},{value:"Static Generation (\u9759\u6001\u751f\u6210)",id:"static-generation-\u9759\u6001\u751f\u6210",level:2},{value:"Resources (\u8d44\u6e90)",id:"resources-\u8d44\u6e90",level:2}];function d(n){const e={a:"a",code:"code",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"\u5728 Next.js \u4e2d, \u4f60\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u5185\u5bb9\u7684\u8def\u7531\u548c\u6e32\u67d3\u6765\u652f\u6301\u591a\u79cd\u8bed\u8a00. \u4f7f\u4f60\u7684\u7f51\u7ad9\u9002\u5e94\u4e0d\u540c\u7684\u8bed\u8a00\u73af\u5883\u5305\u62ec\u7ffb\u8bd1\u5185\u5bb9(\u672c\u5730\u5316)\u548c\u56fd\u9645\u5316\u8def\u7531."}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"terminology-\u672f\u8bed",children:"Terminology (\u672f\u8bed)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Locale(\u5730\u533a)"}),": \u4e00\u7ec4\u8bed\u8a00\u548c\u8bed\u8a00\u683c\u5f0f\u5316\u4e2d\u7684\u6807\u8bc6\u7b26, \u901a\u5e38\u5305\u62ec\u7528\u6237\u7684\u9996\u9009\u8bed\u8a00\u4ee5\u53ca\u53ef\u80fd\u7684\u5730\u7406\u533a\u57df.","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"en-US"}),": \u7f8e\u56fd\u7684\u82f1\u6587"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"nl-NL"}),": \u8377\u5170\u7684\u8377\u5170\u8bed"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"nl"}),": \u672a\u6307\u5b9a\u5730\u533a\u7684\u8377\u5170\u8bed"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"routing-overview-\u8def\u7531\u7b80\u4ecb",children:"Routing Overview (\u8def\u7531\u7b80\u4ecb)"}),"\n",(0,i.jsxs)(e.p,{children:["\u5efa\u8bae\u4f7f\u7528\u6d4f\u89c8\u5668\u4e2d\u7684\u7528\u6237\u8bed\u8a00\u9996\u9009\u9879\u6765\u9009\u62e9\u8981\u4f7f\u7528\u54ea\u79cd\u8bed\u8a00. \u66f4\u6539\u9996\u9009\u8bed\u8a00\u5c06\u4fee\u6539\u4f20\u5165\u5e94\u7528\u7a0b\u5e8f\u7684 ",(0,i.jsx)(e.code,{children:"Accept-Language"})," \u5934."]}),"\n",(0,i.jsxs)(e.p,{children:["\u6bd4\u5982, \u4f7f\u7528\u4e0b\u5217\u5e93, \u4f60\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u5230\u6765\u7684 ",(0,i.jsx)(e.code,{children:"Request"})," \u5bf9\u8c61, \u57fa\u4e8e ",(0,i.jsx)(e.code,{children:"Headers"})," \u5934, \u8ba1\u5212\u652f\u6301\u7684\u672c\u5730\u8bed\u8a00, \u9ed8\u8ba4\u672c\u5730\u8bed\u8a00, \u6765\u51b3\u5b9a\u9009\u62e9\u54ea\u4e2a\u5730\u533a."]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",metastring:'title="middleware.js"',children:'import { match } from "@formatjs/intl-localematcher";\nimport Negotiator from "negotiator";\n\nlet headers = { "accept-language": "en-US,en;q=0.5" };\nlet languages = new Negotiator({ headers }).languages();\nlet locales = ["en-US", "nl-NL", "nl"];\nlet defaultLocale = "en-US";\n\nmatch(languages, locales, defaultLocale); // -> \'en-US\'\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u8def\u7531\u53ef\u4ee5\u901a\u8fc7\u5b50\u8def\u5f84 (",(0,i.jsx)(e.code,{children:"/fr/products"}),") \u6216\u57df(",(0,i.jsx)(e.code,{children:"my-site.fr/products"}),")\u8fdb\u884c\u56fd\u9645\u5316. \u6709\u4e86\u8fd9\u4e9b\u4fe1\u606f, \u4f60\u73b0\u5728\u5c31\u53ef\u4ee5\u6839\u636e ",(0,i.jsx)(e.a,{href:"https://nextjs.org/docs/app/building-your-application/routing/middleware",children:"Middleware(\u4e2d\u95f4\u4ef6)"})," \u5185\u7684\u5730\u57df\u5bf9\u7528\u6237\u8fdb\u884c\u91cd\u5b9a\u5411."]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",metastring:'title="middleware.js"',children:"let locales = ['en-US', 'nl-NL', 'nl']\n\n// Get the preferred locale, similar to the above or using a library\nfunction getLocale(request) { ... }\n\nexport function middleware(request) {\n  // Check if there is any supported locale in the pathname\n  const { pathname } = request.nextUrl\n  const pathnameHasLocale = locales.some(\n    (locale) => pathname.startsWith(`/${locale}/`) || pathname === `/${locale}`\n  )\n\n  if (pathnameHasLocale) return\n\n  // Redirect if there is no locale\n  const locale = getLocale(request)\n  request.nextUrl.pathname = `/${locale}${pathname}`\n  // e.g. incoming request is /products\n  // The new URL is now /en-US/products\n  return Response.redirect(request.nextUrl)\n}\n\nexport const config = {\n  matcher: [\n    // Skip all internal paths (_next)\n    '/((?!_next).*)',\n    // Optional: only run on root (/) URL\n    // '/'\n  ],\n}\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6700\u540e, \u8981\u786e\u4fdd\u6240\u6709 ",(0,i.jsx)(e.code,{children:"app/"})," \u5185\u7684\u6587\u4ef6\u90fd\u8981\u5d4c\u5957\u4e8e ",(0,i.jsx)(e.code,{children:"app/[lang]"})," \u5185. \u8fd9\u53ef\u4ee5\u4f7f\u5f97 Next.js \u8def\u7531\u52a8\u6001\u9009\u62e9\u4e0d\u540c\u7684\u8def\u7531,\u5c06 ",(0,i.jsx)(e.code,{children:"lang"})," \u53c2\u6570\u4f20\u9012\u7ed9\u6bcf\u4e00 page(\u9875) \u548c\u6bcf\u4e00\u4e2a layout(\u5e03\u5c40). \u6bd4\u5982:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-tsx",metastring:'title="app/[lang]/page.js"',children:'// You now have access to the current locale\n// e.g. /en-US/products -> `lang` is "en-US"\nexport default async function Page({ params: { lang } }) {\n  return ...\n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u6839\u5e03\u5c40\u4e5f\u53ef\u4ee5\u88ab\u5d4c\u5957\u5728\u4e00\u4e2a\u65b0\u7684\u6587\u4ef6\u5939\u4e2d(\u5982, ",(0,i.jsx)(e.code,{children:"app/[lang]/layout.js"}),")."]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"localization-\u672c\u5730\u5316",children:"Localization (\u672c\u5730\u5316)"}),"\n",(0,i.jsx)(e.p,{children:"\u6839\u636e\u7528\u6237\u504f\u597d\u7684\u5730\u57df\u6216\u672c\u5730\u5316\u53d8\u66f4\u663e\u793a\u5185\u5bb9\u4e0d\u662f Next.js \u72ec\u6709\u7684\u529f\u80fd, \u4e0b\u9762\u63cf\u8ff0\u7684\u6a21\u5f0f\u5bf9\u4efb\u4f55\u7f51\u7edc\u5e94\u7528\u7a0b\u5e8f\u90fd\u9002\u7528."}),"\n",(0,i.jsx)(e.p,{children:"\u5047\u8bbe\u6211\u4eec\u5e0c\u671b\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u540c\u65f6\u652f\u6301\u82f1\u8bed\u548c\u8377\u5170\u8bed\u5185\u5bb9. \u6211\u4eec\u9700\u8981\u7ef4\u62a4\u4e24\u4e2a\u4e0d\u540c\u7684\u5b57\u5178\u5bf9\u8c61, \u8fd9\u4e9b\u5bf9\u8c61\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4ece\u67d0\u4e2a\u952e\u5230\u672c\u5730\u5316\u5b57\u7b26\u4e32\u7684\u6620\u5c04. \u4f8b\u5982:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",metastring:'title="dictionaries/en.json"',children:'{\n  "products": {\n    "cart": "Add to Cart"\n  }\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",metastring:'title="dictionaries/nl.json"',children:'{\n  "products": {\n    "cart": "Toevoegen aan Winkelwagen"\n  }\n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u7136\u540e\u6211\u4eec\u521b\u5efa\u4e00\u4e2a ",(0,i.jsx)(e.code,{children:"getDictionary"})," \u51fd\u6570\u4e3a\u8bf7\u6c42\u7684\u5730\u533a\u52a0\u8f7d\u8fd9\u4e9b\u7ffb\u8bd1:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",metastring:'title="app/[lang]/ dictionaries.js"',children:'import "server-only";\n\nconst dictionaries = {\n  en: () => import("./dictionaries/en.json").then((module) => module.default),\n  nl: () => import("./dictionaries/nl.json").then((module) => module.default),\n};\n\nexport const getDictionary = async (locale) => dictionaries[locale]();\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u6839\u636e\u5f53\u524d\u9009\u62e9\u7684\u8bed\u8a00, \u6211\u4eec\u53ef\u4ee5\u5728\u5e03\u5c40\u6216\u9875\u9762\u4e2d\u83b7\u53d6\u5b57\u6bb5\u5bf9\u8c61."}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-tsx",metastring:'title="app/[lang]/page.js"',children:'import { getDictionary } from "./dictionaries";\n\nexport default async function Page({ params: { lang } }) {\n  const dict = await getDictionary(lang); // en\n  return <button>{dict.products.cart}</button>; // Add to Cart\n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u7531\u4e8e ",(0,i.jsx)(e.code,{children:"app/"})," \u76ee\u5f55\u4e2d\u7684\u6240\u6709\u5e03\u5c40\u548c\u9875\u9762\u90fd\u9ed8\u8ba4\u4e3a ",(0,i.jsx)(e.a,{href:"https://nextjs.org/docs/app/building-your-application/rendering/server-components",children:"Server Components(\u670d\u52a1\u5668\u7ec4\u4ef6)"}),", \u56e0\u6b64\u6211\u4eec\u65e0\u9700\u62c5\u5fc3\u7ffb\u8bd1\u6587\u4ef6\u7684\u5927\u5c0f\u4f1a\u5f71\u54cd\u5ba2\u6237\u7aef\u5185 Javascript \u5305\u7684\u5927\u5c0f. \u8fd9\u4e9b\u4ee3\u7801\u53ea\u4f1a\u5728\u670d\u52a1\u5668\u4e0a\u8fd0\u884c, \u53ea\u6709\u751f\u6210\u7684 HTML \u624d\u4f1a\u53d1\u9001\u5230\u6d4f\u89c8\u5668."]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"static-generation-\u9759\u6001\u751f\u6210",children:"Static Generation (\u9759\u6001\u751f\u6210)"}),"\n",(0,i.jsxs)(e.p,{children:["\u5bf9\u7ed9\u5b9a\u7684\u4e00\u7ec4\u5730\u533a\u751f\u6210\u9759\u6001\u8def\u7531, \u6211\u4eec\u53ef\u4ee5\u5728 page(\u9875\u9762) \u6216 layout(\u5e03\u5c40) \u4e2d\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"generateStaticParams"}),"\u51fd\u6570. \u8fd9\u662f\u5168\u5c40\u7684, \u6bd4\u5982, \u5728\u6839\u7ec4\u4ef6\u4e2d:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-tsx",metastring:'title="app/[lang]/layout.js"',children:'export async function generateStaticParams() {\n  return [{ lang: "en-US" }, { lang: "de" }];\n}\n\nexport default function Root({ children, params }) {\n  return (\n    <html lang={params.lang}>\n      <body>{children}</body>\n    </html>\n  );\n}\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"resources-\u8d44\u6e90",children:"Resources (\u8d44\u6e90)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/vercel/next.js/tree/canary/examples/app-dir-i18n-routing",children:"Minimal i18n routing and translations(\u6700\u5c0f i18n \u8def\u7531\u548c\u7ffb\u8bd1\u793a\u4f8b)"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://next-intl-docs.vercel.app/docs/next-13",children:(0,i.jsx)(e.code,{children:"next-intl"})})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/QuiiBz/next-international",children:(0,i.jsx)(e.code,{children:"next-international"})})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/i18nexus/next-i18n-router",children:(0,i.jsx)(e.code,{children:"next-i18n-router"})})}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},1151:(n,e,t)=>{t.d(e,{Z:()=>s,a:()=>o});var i=t(7294);const r={},a=i.createContext(r);function o(n){const e=i.useContext(a);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:o(n.components),i.createElement(a.Provider,{value:e},n.children)}}}]);